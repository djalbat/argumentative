'use strict';

function parseArgv(argv, abbreviations) {
  var interpreterPath = argv[0],
      filePath = argv[1],
      args = argv.slice(2),
      ///
  commands = [],
      optionMap = {},
      optionAbbreviationMap = abbreviations || {};

  args.forEach(function (argument) {
    ///
    var abbreviatedOptions = /^-[^-]+$/.test(argument),
        unabbreviatedOption = /^--[^-]+$/.test(argument);

    if (false) {
      ///
    } else if (abbreviatedOptions) {
      var index = argument.indexOf('=');

      if (index === -1) {
        var optionNames = argument.split('');

        optionNames.shift();

        optionNames.forEach(function (optionName) {
          var optionValue = true;

          optionMap[optionName] = optionValue;
        });
      } else {
        var _optionNames = argument.substring(1, index).split(''),
            optionNamesLength = _optionNames.length,
            lastOptionIndex = optionNamesLength - 1,
            lastOptionValue = argument.substring(index + 1);

        _optionNames.forEach(function (optionName, index) {
          var optionValue = index === lastOptionIndex ? lastOptionValue : true;

          optionMap[optionName] = optionValue;
        });
      }
    } else if (unabbreviatedOption) {
      var optionName = void 0,
          optionValue = void 0;

      var _index = argument.indexOf('=');

      if (_index === -1) {
        optionName = argument.substring(2);

        optionValue = true;
      } else {
        optionName = argument.substring(2, _index);

        optionValue = argument.substring(_index + 1);
      }

      optionMap[optionName] = optionValue;
    } else {
      var command = argument; ///

      commands.push(command);
    }
  });

  var abbreviatedOptionNames = Object.keys(optionAbbreviationMap); ///

  abbreviatedOptionNames.forEach(function (abbreviatedOptionName) {
    if (optionMap.hasOwnProperty(abbreviatedOptionName)) {
      if (optionAbbreviationMap.hasOwnProperty(abbreviatedOptionName)) {
        var unAbbreviatedOptionName = optionAbbreviationMap[abbreviatedOptionName];

        optionMap[unAbbreviatedOptionName] = optionMap[abbreviatedOptionName];

        delete optionMap[abbreviatedOptionName];
      }
    }
  });

  var options = optionMap; ///

  return {
    args: args,
    options: options,
    commands: commands,
    filePath: filePath,
    interpreterPath: interpreterPath
  };
}

module.exports = {
  parseArgv: parseArgv
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9hcmd1bWVudGF0aXZlLmpzIl0sIm5hbWVzIjpbInBhcnNlQXJndiIsImFyZ3YiLCJhYmJyZXZpYXRpb25zIiwiaW50ZXJwcmV0ZXJQYXRoIiwiZmlsZVBhdGgiLCJhcmdzIiwic2xpY2UiLCJjb21tYW5kcyIsIm9wdGlvbk1hcCIsIm9wdGlvbkFiYnJldmlhdGlvbk1hcCIsImZvckVhY2giLCJhcmd1bWVudCIsImFiYnJldmlhdGVkT3B0aW9ucyIsInRlc3QiLCJ1bmFiYnJldmlhdGVkT3B0aW9uIiwiaW5kZXgiLCJpbmRleE9mIiwib3B0aW9uTmFtZXMiLCJzcGxpdCIsInNoaWZ0Iiwib3B0aW9uTmFtZSIsIm9wdGlvblZhbHVlIiwic3Vic3RyaW5nIiwib3B0aW9uTmFtZXNMZW5ndGgiLCJsZW5ndGgiLCJsYXN0T3B0aW9uSW5kZXgiLCJsYXN0T3B0aW9uVmFsdWUiLCJjb21tYW5kIiwicHVzaCIsImFiYnJldmlhdGVkT3B0aW9uTmFtZXMiLCJPYmplY3QiLCJrZXlzIiwiYWJicmV2aWF0ZWRPcHRpb25OYW1lIiwiaGFzT3duUHJvcGVydHkiLCJ1bkFiYnJldmlhdGVkT3B0aW9uTmFtZSIsIm9wdGlvbnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxTQUFTQSxTQUFULENBQW1CQyxJQUFuQixFQUF5QkMsYUFBekIsRUFBd0M7QUFDdkMsTUFBTUMsa0JBQWtCRixLQUFLLENBQUwsQ0FBeEI7QUFBQSxNQUNHRyxXQUFXSCxLQUFLLENBQUwsQ0FEZDtBQUFBLE1BRU9JLE9BQU9KLEtBQUtLLEtBQUwsQ0FBVyxDQUFYLENBRmQ7QUFBQSxNQUU4QjtBQUN2QkMsYUFBVyxFQUhsQjtBQUFBLE1BSU9DLFlBQVksRUFKbkI7QUFBQSxNQUtPQyx3QkFBd0JQLGlCQUFpQixFQUxoRDs7QUFPQUcsT0FBS0ssT0FBTCxDQUFhLFVBQUNDLFFBQUQsRUFBYztBQUFHO0FBQzdCLFFBQU1DLHFCQUFxQixXQUFXQyxJQUFYLENB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IHBhcnNlQXJndihhcmd2LCBhYmJyZXZpYXRpb25zKSB7XG5cdGNvbnN0IGludGVycHJldGVyUGF0aCA9IGFyZ3ZbMF0sXG5cdFx0XHRcdGZpbGVQYXRoID0gYXJndlsxXSxcbiAgICAgICAgYXJncyA9IGFyZ3Yuc2xpY2UoMiksICAvLy9cbiAgICAgICAgY29tbWFuZHMgPSBbXSxcbiAgICAgICAgb3B0aW9uTWFwID0ge30sXG4gICAgICAgIG9wdGlvbkFiYnJldmlhdGlvbk1hcCA9IGFiYnJldmlhdGlvbnMgfHwge307XG5cblx0YXJncy5mb3JFYWNoKChhcmd1bWVudCkgPT4geyAgLy8vXG5cdFx0Y29uc3QgYWJicmV2aWF0ZWRPcHRpb25zID0gL14tW14tXSskLy50ZXN0KGFyZ3VtZW50KSxcbiAgICAgICAgICB1bmFiYnJldmlhdGVkT3B0aW9uID0gL14tLVteLV0rJC8udGVzdChhcmd1bWVudCk7XG5cblx0XHRpZiAoZmFsc2UpIHtcblx0XHQgIC8vL1xuICAgIH0gZWxzZSBpZiAoYWJicmV2aWF0ZWRPcHRpb25zKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGFyZ3VtZW50LmluZGV4T2YoJz0nKTtcblxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICBjb25zdCBvcHRpb25OYW1lcyA9IGFyZ3VtZW50LnNwbGl0KCcnKTtcblxuICAgICAgICBvcHRpb25OYW1lcy5zaGlmdCgpO1xuXG4gICAgICAgIG9wdGlvbk5hbWVzLmZvckVhY2goKG9wdGlvbk5hbWUpID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IHRydWU7XG5cbiAgICAgICAgICBvcHRpb25NYXBbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbk5hbWVzID0gYXJndW1lbnQuc3Vic3RyaW5nKDEsIGluZGV4KS5zcGxpdCgnJyksXG4gICAgICAgICAgICAgIG9wdGlvbk5hbWVzTGVuZ3RoID0gb3B0aW9uTmFtZXMubGVuZ3RoLFxuICAgICAgICAgICAgICBsYXN0T3B0aW9uSW5kZXggPSBvcHRpb25OYW1lc0xlbmd0aCAtIDEsXG4gICAgICAgICAgICAgIGxhc3RPcHRpb25WYWx1ZSA9IGFyZ3VtZW50LnN1YnN0cmluZyhpbmRleCArIDEpO1xuXG4gICAgICAgIG9wdGlvbk5hbWVzLmZvckVhY2goKG9wdGlvbk5hbWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSAoaW5kZXggPT09IGxhc3RPcHRpb25JbmRleCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0T3B0aW9uVmFsdWUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWU7XG5cbiAgICAgICAgICBvcHRpb25NYXBbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh1bmFiYnJldmlhdGVkT3B0aW9uKSB7XG5cdFx0ICBsZXQgb3B0aW9uTmFtZSwgb3B0aW9uVmFsdWU7XG5cblx0XHQgIGNvbnN0IGluZGV4ID0gYXJndW1lbnQuaW5kZXhPZignPScpO1xuXG5cdFx0ICBpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0ICAgIG9wdGlvbk5hbWUgPSBhcmd1bWVudC5zdWJzdHJpbmcoMik7XG5cbiAgICAgICAgb3B0aW9uVmFsdWUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcblx0XHQgICAgb3B0aW9uTmFtZSA9IGFyZ3VtZW50LnN1YnN0cmluZygyLCBpbmRleCk7XG5cblx0XHQgICAgb3B0aW9uVmFsdWUgPSAgYXJndW1lbnQuc3Vic3RyaW5nKGluZGV4ICsgMSk7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbk1hcFtvcHRpb25OYW1lXSA9IG9wdGlvblZhbHVlO1xuICAgIH0gZWxzZSB7XG5cdFx0ICBjb25zdCBjb21tYW5kID0gYXJndW1lbnQ7IC8vL1xuXG4gICAgICBjb21tYW5kcy5wdXNoKGNvbW1hbmQpO1xuICAgIH1cblx0fSk7XG5cblx0Y29uc3QgYWJicmV2aWF0ZWRPcHRpb25OYW1lcyA9IE9iamVjdC5rZXlzKG9wdGlvbkFiYnJldmlhdGlvbk1hcCk7ICAvLy9cblxuICBhYmJyZXZpYXRlZE9wdGlvbk5hbWVzLmZvckVhY2goKGFiYnJldmlhdGVkT3B0aW9uTmFtZSkgPT4ge1xuICAgIGlmIChvcHRpb25NYXAuaGFzT3duUHJvcGVydHkoYWJicmV2aWF0ZWRPcHRpb25OYW1lKSkge1xuICAgICAgaWYgKG9wdGlvbkFiYnJldmlhdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShhYmJyZXZpYXRlZE9wdGlvbk5hbWUpKSB7XG4gICAgICAgIGNvbnN0IHVuQWJicmV2aWF0ZWRPcHRpb25OYW1lID0gb3B0aW9uQWJicmV2aWF0aW9uTWFwW2FiYnJldmlhdGVkT3B0aW9uTmFtZV07XG5cbiAgICAgICAgb3B0aW9uTWFwW3VuQWJicmV2aWF0ZWRPcHRpb25OYW1lXSA9IG9wdGlvbk1hcFthYmJyZXZpYXRlZE9wdGlvbk5hbWVdO1xuXG4gICAgICAgIGRlbGV0ZSBvcHRpb25NYXBbYWJicmV2aWF0ZWRPcHRpb25OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG5cdGNvbnN0IG9wdGlvbnMgPSBvcHRpb25NYXA7IC8vL1xuXG5cdHJldHVybiAoe1xuXHRcdGFyZ3MsXG4gICAgb3B0aW9ucyxcblx0XHRjb21tYW5kcyxcblx0XHRmaWxlUGF0aCxcblx0XHRpbnRlcnByZXRlclBhdGhcblx0fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYXJzZUFyZ3Zcbn07XG4iXX0=