'use strict';

function parseArgv(argv, abbreviations) {
  var interpreterPath = argv[0],
      filePath = argv[1],
      args = argv.slice(2),
      ///
  commands = [],
      optionMap = {},
      optionAbbreviationMap = abbreviations || {};

  args.forEach(function (argument) {
    ///
    var abbreviatedOptions = /^-[^-]+$/.test(argument),
        unabbreviatedOption = /^--[^-].+$/.test(argument);

    if (false) {
      ///
    } else if (abbreviatedOptions) {
      var index = argument.indexOf('=');

      if (index === -1) {
        var _optionNames = argument.split('');

        _optionNames.shift();

        _optionNames.forEach(function (optionName) {
          var optionValue = true;

          optionMap[optionName] = optionValue;
        });
      } else {
        var _optionNames2 = argument.substring(1, index).split(''),
            optionNamesLength = _optionNames2.length,
            lastOptionIndex = optionNamesLength - 1,
            lastOptionValue = argument.substring(index + 1);

        _optionNames2.forEach(function (optionName, index) {
          var optionValue = index === lastOptionIndex ? lastOptionValue : true;

          optionMap[optionName] = optionValue;
        });
      }
    } else if (unabbreviatedOption) {
      var optionName = void 0,
          optionValue = void 0;

      var _index = argument.indexOf('=');

      if (_index === -1) {
        optionName = argument.substring(2);

        optionValue = true;
      } else {
        optionName = argument.substring(2, _index);

        optionValue = argument.substring(_index + 1);
      }

      optionMap[optionName] = optionValue;
    } else {
      var command = convertToCamelCase(argument);

      commands.push(command);
    }
  });

  var abbreviatedOptionNames = Object.keys(optionAbbreviationMap); ///

  abbreviatedOptionNames.forEach(function (abbreviatedOptionName) {
    if (optionMap.hasOwnProperty(abbreviatedOptionName)) {
      var unAbbreviatedOptionName = optionAbbreviationMap[abbreviatedOptionName];

      if (optionMap.hasOwnProperty(unAbbreviatedOptionName)) {
        ///
      } else {
        optionMap[unAbbreviatedOptionName] = optionMap[abbreviatedOptionName];
      }

      delete optionMap[abbreviatedOptionName];
    }
  });

  var optionNames = Object.keys(optionMap),
      options = optionNames.reduce(function (options, optionName) {
    var optionValue = optionMap[optionName],
        camelCaseOptionName = convertToCamelCase(optionName);

    optionName = camelCaseOptionName; ///

    options[optionName] = optionValue;

    return options;
  }, {});

  return {
    args: args,
    options: options,
    commands: commands,
    filePath: filePath,
    interpreterPath: interpreterPath
  };
}

module.exports = {
  parseArgv: parseArgv
};

function convertToCamelCase(string) {
  return string.replace(/-(.)/g, function (match, character) {
    return character.toUpperCase();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9hcmd1bWVudGF0aXZlLmpzIl0sIm5hbWVzIjpbInBhcnNlQXJndiIsImFyZ3YiLCJhYmJyZXZpYXRpb25zIiwiaW50ZXJwcmV0ZXJQYXRoIiwiZmlsZVBhdGgiLCJhcmdzIiwic2xpY2UiLCJjb21tYW5kcyIsIm9wdGlvbk1hcCIsIm9wdGlvbkFiYnJldmlhdGlvbk1hcCIsImZvckVhY2giLCJhcmd1bWVudCIsImFiYnJldmlhdGVkT3B0aW9ucyIsInRlc3QiLCJ1bmFiYnJldmlhdGVkT3B0aW9uIiwiaW5kZXgiLCJpbmRleE9mIiwib3B0aW9uTmFtZXMiLCJzcGxpdCIsInNoaWZ0Iiwib3B0aW9uTmFtZSIsIm9wdGlvblZhbHVlIiwic3Vic3RyaW5nIiwib3B0aW9uTmFtZXNMZW5ndGgiLCJsZW5ndGgiLCJsYXN0T3B0aW9uSW5kZXgiLCJsYXN0T3B0aW9uVmFsdWUiLCJjb21tYW5kIiwiY29udmVydFRvQ2FtZWxDYXNlIiwicHVzaCIsImFiYnJldmlhdGVkT3B0aW9uTmFtZXMiLCJPYmplY3QiLCJrZXlzIiwiYWJicmV2aWF0ZWRPcHRpb25OYW1lIiwiaGFzT3duUHJvcGVydHkiLCJ1bkFiYnJldmlhdGVkT3B0aW9uTmFtZSIsIm9wdGlvbnMiLCJyZWR1Y2UiLCJjYW1lbENhc2VPcHRpb25OYW1lIiwibW9kdWxlIiwiZXhwb3J0cyIsInN0cmluZyIsInJlcGxhY2UiLCJtYXRjaCIsImNoYXJhY3RlciIsInRvVXBwZXJDYXNlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxTQUFTQSxTQUFULENBQW1CQyxJQUFuQixFQUF5QkMsYUFBekIsRUFBd0M7QUFDdkMsTUFBTUMsa0JBQWtCRixLQUFLLENBQUwsQ0FBeEI7QUFBQSxNQUNHRyxXQUFXSCxLQUFLLENBQUwsQ0FEZDtBQUFBLE1BRU9JLE9BQU9KLEtBQUtLLEtBQUwsQ0FBVyxDQUFYLENBRmQ7QUFBQSxNQUU4QjtBQUN2QkMsYUFBVyxFQUhsQjtBQUFBLE1BSU9DLFlBQVksRUFKbkI7QUFB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QUF5QjtBQUNyRCxRQUFNQyxjQUFjYixVQUFVWSxVQUFWLENBQXBCO0FBQUEsUUFDT2tCLHNCQUFzQlYsbUJBQW1CUixVQUFuQixDQUQ3Qjs7QUFHQ0EsaUJBQWFrQixtQkFBYixDQUpvRCxDQUlsQjs7QUFFbENGLFlBQVFoQixVQUFSLElBQXNCQyxXQUF0Qjs7QUFFQSxXQUFPZSxPQUFQO0FBQ0QsR0FUUyxFQVNQLEVBVE8sQ0FEaEI7O0FBWUQsU0FBUTtBQUNQL0IsY0FETztBQUVMK0Isb0JBRks7QUFHUDdCLHNCQUhPO0FBSVBILHNCQUpPO0FBS1BEO0FBTE8sR0FBUjtBQU9BOztBQUVEb0MsT0FBT0MsT0FBUCxHQUFpQjtBQUNmeEM7QUFEZSxDQUFqQjs7QUFJQSxTQUFTNEIsa0JBQVQsQ0FBNEJhLE1BQTVCLEVBQW9DO0FBQ2xDLFNBQU9BLE9BQU9DLE9BQVAsQ0FBZSxPQUFmLEVBQXdCLFVBQUNDLEtBQUQsRUFBUUMsU0FBUjtBQUFBLFdBQXNCQSxVQUFVQyxXQUFWLEVBQXRCO0FBQUEsR0FBeEIsQ0FBUDtBQUNEIiwiZmlsZSI6ImFyZ3VtZW50YXRpdmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHBhcnNlQXJndihhcmd2LCBhYmJyZXZpYXRpb25zKSB7XG5cdGNvbnN0IGludGVycHJldGVyUGF0aCA9IGFyZ3ZbMF0sXG5cdFx0XHRcdGZpbGVQYXRoID0gYXJndlsxXSxcbiAgICAgICAgYXJncyA9IGFyZ3Yuc2xpY2UoMiksICAvLy9cbiAgICAgICAgY29tbWFuZHMgPSBbXSxcbiAgICAgICAgb3B0aW9uTWFwID0ge30sXG4gICAgICAgIG9wdGlvbkFiYnJldmlhdGlvbk1hcCA9IGFiYnJldmlhdGlvbnMgfHwge307XG5cblx0YXJncy5mb3JFYWNoKChhcmd1bWVudCkgPT4geyAgLy8vXG5cdFx0Y29uc3QgYWJicmV2aWF0ZWRPcHRpb25zID0gL14tW14tXSskLy50ZXN0KGFyZ3VtZW50KSxcbiAgICAgICAgICB1bmFiYnJldmlhdGVkT3B0aW9uID0gL14tLVteLV0uKyQvLnRlc3QoYXJndW1lbnQpO1xuXG5cdFx0aWYgKGZhbHNlKSB7XG5cdFx0ICAvLy9cbiAgICB9IGVsc2UgaWYgKGFiYnJldmlhdGVkT3B0aW9ucykge1xuICAgICAgY29uc3QgaW5kZXggPSBhcmd1bWVudC5pbmRleE9mKCc9Jyk7XG5cbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uTmFtZXMgPSBhcmd1bWVudC5zcGxpdCgnJyk7XG5cbiAgICAgICAgb3B0aW9uTmFtZXMuc2hpZnQoKTtcblxuICAgICAgICBvcHRpb25OYW1lcy5mb3JFYWNoKChvcHRpb25OYW1lKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSB0cnVlO1xuXG4gICAgICAgICAgb3B0aW9uTWFwW29wdGlvbk5hbWVdID0gb3B0aW9uVmFsdWU7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvcHRpb25OYW1lcyA9IGFyZ3VtZW50LnN1YnN0cmluZygxLCBpbmRleCkuc3BsaXQoJycpLFxuICAgICAgICAgICAgICBvcHRpb25OYW1lc0xlbmd0aCA9IG9wdGlvbk5hbWVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbGFzdE9wdGlvbkluZGV4ID0gb3B0aW9uTmFtZXNMZW5ndGggLSAxLFxuICAgICAgICAgICAgICBsYXN0T3B0aW9uVmFsdWUgPSBhcmd1bWVudC5zdWJzdHJpbmcoaW5kZXggKyAxKTtcblxuICAgICAgICBvcHRpb25OYW1lcy5mb3JFYWNoKChvcHRpb25OYW1lLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gKGluZGV4ID09PSBsYXN0T3B0aW9uSW5kZXgpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9wdGlvblZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlO1xuXG4gICAgICAgICAgb3B0aW9uTWFwW29wdGlvbk5hbWVdID0gb3B0aW9uVmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodW5hYmJyZXZpYXRlZE9wdGlvbikge1xuXHRcdCAgbGV0IG9wdGlvbk5hbWUsIG9wdGlvblZhbHVlO1xuXG5cdFx0ICBjb25zdCBpbmRleCA9IGFyZ3VtZW50LmluZGV4T2YoJz0nKTtcblxuXHRcdCAgaWYgKGluZGV4ID09PSAtMSkge1xuXHRcdCAgICBvcHRpb25OYW1lID0gYXJndW1lbnQuc3Vic3RyaW5nKDIpO1xuXG4gICAgICAgIG9wdGlvblZhbHVlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG5cdFx0ICAgIG9wdGlvbk5hbWUgPSBhcmd1bWVudC5zdWJzdHJpbmcoMiwgaW5kZXgpO1xuXG5cdFx0ICAgIG9wdGlvblZhbHVlID0gIGFyZ3VtZW50LnN1YnN0cmluZyhpbmRleCArIDEpO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25NYXBbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcbiAgICB9IGVsc2Uge1xuXHRcdCAgY29uc3QgY29tbWFuZCA9IGNvbnZlcnRUb0NhbWVsQ2FzZShhcmd1bWVudCk7XG5cbiAgICAgIGNvbW1hbmRzLnB1c2goY29tbWFuZCk7XG4gICAgfVxuXHR9KTtcblxuXHRjb25zdCBhYmJyZXZpYXRlZE9wdGlvbk5hbWVzID0gT2JqZWN0LmtleXMob3B0aW9uQWJicmV2aWF0aW9uTWFwKTsgIC8vL1xuXG4gIGFiYnJldmlhdGVkT3B0aW9uTmFtZXMuZm9yRWFjaCgoYWJicmV2aWF0ZWRPcHRpb25OYW1lKSA9PiB7XG4gICAgaWYgKG9wdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShhYmJyZXZpYXRlZE9wdGlvbk5hbWUpKSB7XG4gICAgICBjb25zdCB1bkFiYnJldmlhdGVkT3B0aW9uTmFtZSA9IG9wdGlvbkFiYnJldmlhdGlvbk1hcFthYmJyZXZpYXRlZE9wdGlvbk5hbWVdO1xuXG4gICAgICBpZiAob3B0aW9uTWFwLmhhc093blByb3BlcnR5KHVuQWJicmV2aWF0ZWRPcHRpb25OYW1lKSkge1xuICAgICAgICAvLy9cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbk1hcFt1bkFiYnJldmlhdGVkT3B0aW9uTmFtZV0gPSBvcHRpb25NYXBbYWJicmV2aWF0ZWRPcHRpb25OYW1lXTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIG9wdGlvbk1hcFthYmJyZXZpYXRlZE9wdGlvbk5hbWVdO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgb3B0aW9uTmFtZXMgPSBPYmplY3Qua2V5cyhvcHRpb25NYXApLFxuICAgICAgICBvcHRpb25zID0gb3B0aW9uTmFtZXMucmVkdWNlKChvcHRpb25zLCBvcHRpb25OYW1lKSA9PiB7XG5cdCAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb25NYXBbb3B0aW9uTmFtZV0sXG4gICAgICAgICAgICAgICAgY2FtZWxDYXNlT3B0aW9uTmFtZSA9IGNvbnZlcnRUb0NhbWVsQ2FzZShvcHRpb25OYW1lKTtcblxuICAgICAgICAgIG9wdGlvbk5hbWUgPSBjYW1lbENhc2VPcHRpb25OYW1lOyAvLy9cblxuICAgICAgICAgIG9wdGlvbnNbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcblxuICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICB9LCB7fSk7XG5cblx0cmV0dXJuICh7XG5cdFx0YXJncyxcbiAgICBvcHRpb25zLFxuXHRcdGNvbW1hbmRzLFxuXHRcdGZpbGVQYXRoLFxuXHRcdGludGVycHJldGVyUGF0aFxuXHR9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlQXJndlxufTtcblxuZnVuY3Rpb24gY29udmVydFRvQ2FtZWxDYXNlKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLy0oLikvZywgKG1hdGNoLCBjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpKTtcbn1cbiJdfQ==