'use strict';

function parseArgv(argv, abbreviations) {
  var interpreterPath = argv[0],
      filePath = argv[1],
      args = argv.slice(2),
      ///
  commands = [],
      optionMap = {},
      optionAbbreviationMap = abbreviations || {};

  args.forEach(function (argument) {
    ///
    var abbreviatedOptions = /^-[^-]+$/.test(argument),
        unabbreviatedOption = /^--[^-].+$/.test(argument);

    if (false) {
      ///
    } else if (abbreviatedOptions) {
      var index = argument.indexOf('=');

      if (index === -1) {
        var _optionNames = argument.split('');

        _optionNames.shift();

        _optionNames.forEach(function (optionName) {
          var optionValue = true;

          optionMap[optionName] = optionValue;
        });
      } else {
        var _optionNames2 = argument.substring(1, index).split(''),
            optionNamesLength = _optionNames2.length,
            lastOptionIndex = optionNamesLength - 1,
            lastOptionValue = argument.substring(index + 1);

        _optionNames2.forEach(function (optionName, index) {
          var optionValue = index === lastOptionIndex ? lastOptionValue : true;

          optionMap[optionName] = optionValue;
        });
      }
    } else if (unabbreviatedOption) {
      var optionName = void 0,
          optionValue = void 0;

      var _index = argument.indexOf('=');

      if (_index === -1) {
        optionName = argument.substring(2);

        optionValue = true;
      } else {
        optionName = argument.substring(2, _index);

        optionValue = argument.substring(_index + 1);
      }

      optionMap[optionName] = optionValue;
    } else {
      var command = toCamelCase(argument);

      commands.push(command);
    }
  });

  var abbreviatedOptionNames = Object.keys(optionAbbreviationMap); ///

  abbreviatedOptionNames.forEach(function (abbreviatedOptionName) {
    if (optionMap.hasOwnProperty(abbreviatedOptionName)) {
      var unAbbreviatedOptionName = optionAbbreviationMap[abbreviatedOptionName];

      if (optionMap.hasOwnProperty(unAbbreviatedOptionName)) {
        ///
      } else {
        optionMap[unAbbreviatedOptionName] = optionMap[abbreviatedOptionName];
      }

      delete optionMap[abbreviatedOptionName];
    }
  });

  var optionNames = Object.keys(optionMap),
      options = optionNames.reduce(function (options, optionName) {
    var optionValue = optionMap[optionName];

    optionName = toCamelCase(optionName); ///

    options[optionName] = optionValue;

    return options;
  }, {});

  return {
    args: args,
    options: options,
    commands: commands,
    filePath: filePath,
    interpreterPath: interpreterPath
  };
}

module.exports = {
  parseArgv: parseArgv
};

function toCamelCase(string) {
  return string.replace(/-(.)/g, function (match, character) {
    return character.toUpperCase();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9hcmd1bWVudGF0aXZlLmpzIl0sIm5hbWVzIjpbInBhcnNlQXJndiIsImFyZ3YiLCJhYmJyZXZpYXRpb25zIiwiaW50ZXJwcmV0ZXJQYXRoIiwiZmlsZVBhdGgiLCJhcmdzIiwic2xpY2UiLCJjb21tYW5kcyIsIm9wdGlvbk1hcCIsIm9wdGlvbkFiYnJldmlhdGlvbk1hcCIsImZvckVhY2giLCJhcmd1bWVudCIsImFiYnJldmlhdGVkT3B0aW9ucyIsInRlc3QiLCJ1bmFiYnJldmlhdGVkT3B0aW9uIiwiaW5kZXgiLCJpbmRleE9mIiwib3B0aW9uTmFtZXMiLCJzcGxpdCIsInNoaWZ0Iiwib3B0aW9uTmFtZSIsIm9wdGlvblZhbHVlIiwic3Vic3RyaW5nIiwib3B0aW9uTmFtZXNMZW5ndGgiLCJsZW5ndGgiLCJsYXN0T3B0aW9uSW5kZXgiLCJsYXN0T3B0aW9uVmFsdWUiLCJjb21tYW5kIiwidG9DYW1lbENhc2UiLCJwdXNoIiwiYWJicmV2aWF0ZWRPcHRpb25OYW1lcyIsIk9iamVjdCIsImtleXMiLCJhYmJyZXZpYXRlZE9wdGlvbk5hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsInVuQWJicmV2aWF0ZWRPcHRpb25OYW1lIiwib3B0aW9ucyIsInJlZHVjZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdHJpbmciLCJyZXBsYWNlIiwibWF0Y2giLCJjaGFyYWN0ZXIiLCJ0b1VwcGVyQ2FzZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsU0FBU0EsU0FBVCxDQUFtQkMsSUFBbkIsRUFBeUJDLGFBQXpCLEVBQXdDO0FBQ3ZDLE1BQU1DLGtCQUFrQkYsS0FBSyxDQUFMLENBQXhCO0FBQUEsTUFDR0csV0FBV0gsS0FBSyxDQUFMLENBRGQ7QUFBQSxNQUVPSSxPQUFPSixLQUFLSyxLQUFMLENBQVcsQ0FBWCxDQUZkO0FBQUEsTUFFOEI7QUFDdkJDLGFBQVcsRUFIbEI7QUFBQSxNQUlPQyxZQUFZLEVBSm5CO0FBQUEsTUFLT0Msd0JBQXdCUCxpQkFBaUIsRUFMaEQ7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VixDQUFwQjs7QUFFQ0EsaUJBQWFRLFlBQVlSLFVBQVosQ0FBYixDQUhvRCxDQUdkOztBQUV0Q2dCLFlBQVFoQixVQUFSLElBQXNCQyxXQUF0Qjs7QUFFQSxXQUFPZSxPQUFQO0FBQ0QsR0FSUyxFQVFQLEVBUk8sQ0FEaEI7O0FBV0QsU0FBUTtBQUNQL0IsY0FETztBQUVMK0Isb0JBRks7QUFHUDdCLHNCQUhPO0FBSVBILHNCQUpPO0FBS1BEO0FBTE8sR0FBUjtBQU9BOztBQUVEbUMsT0FBT0MsT0FBUCxHQUFpQjtBQUNmdkM7QUFEZSxDQUFqQjs7QUFJQSxTQUFTNEIsV0FBVCxDQUFxQlksTUFBckIsRUFBNkI7QUFDM0IsU0FBT0EsT0FBT0MsT0FBUCxDQUFlLE9BQWYsRUFBd0IsVUFBQ0MsS0FBRCxFQUFRQyxTQUFSO0FBQUEsV0FBc0JBLFVBQVVDLFdBQVYsRUFBdEI7QUFBQSxHQUF4QixDQUFQO0FBQ0QiLCJmaWxlIjoiYXJndW1lbnRhdGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcGFyc2VBcmd2KGFyZ3YsIGFiYnJldmlhdGlvbnMpIHtcblx0Y29uc3QgaW50ZXJwcmV0ZXJQYXRoID0gYXJndlswXSxcblx0XHRcdFx0ZmlsZVBhdGggPSBhcmd2WzFdLFxuICAgICAgICBhcmdzID0gYXJndi5zbGljZSgyKSwgIC8vL1xuICAgICAgICBjb21tYW5kcyA9IFtdLFxuICAgICAgICBvcHRpb25NYXAgPSB7fSxcbiAgICAgICAgb3B0aW9uQWJicmV2aWF0aW9uTWFwID0gYWJicmV2aWF0aW9ucyB8fCB7fTtcblxuXHRhcmdzLmZvckVhY2goKGFyZ3VtZW50KSA9PiB7ICAvLy9cblx0XHRjb25zdCBhYmJyZXZpYXRlZE9wdGlvbnMgPSAvXi1bXi1dKyQvLnRlc3QoYXJndW1lbnQpLFxuICAgICAgICAgIHVuYWJicmV2aWF0ZWRPcHRpb24gPSAvXi0tW14tXS4rJC8udGVzdChhcmd1bWVudCk7XG5cblx0XHRpZiAoZmFsc2UpIHtcblx0XHQgIC8vL1xuICAgIH0gZWxzZSBpZiAoYWJicmV2aWF0ZWRPcHRpb25zKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGFyZ3VtZW50LmluZGV4T2YoJz0nKTtcblxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICBjb25zdCBvcHRpb25OYW1lcyA9IGFyZ3VtZW50LnNwbGl0KCcnKTtcblxuICAgICAgICBvcHRpb25OYW1lcy5zaGlmdCgpO1xuXG4gICAgICAgIG9wdGlvbk5hbWVzLmZvckVhY2goKG9wdGlvbk5hbWUpID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IHRydWU7XG5cbiAgICAgICAgICBvcHRpb25NYXBbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbk5hbWVzID0gYXJndW1lbnQuc3Vic3RyaW5nKDEsIGluZGV4KS5zcGxpdCgnJyksXG4gICAgICAgICAgICAgIG9wdGlvbk5hbWVzTGVuZ3RoID0gb3B0aW9uTmFtZXMubGVuZ3RoLFxuICAgICAgICAgICAgICBsYXN0T3B0aW9uSW5kZXggPSBvcHRpb25OYW1lc0xlbmd0aCAtIDEsXG4gICAgICAgICAgICAgIGxhc3RPcHRpb25WYWx1ZSA9IGFyZ3VtZW50LnN1YnN0cmluZyhpbmRleCArIDEpO1xuXG4gICAgICAgIG9wdGlvbk5hbWVzLmZvckVhY2goKG9wdGlvbk5hbWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSAoaW5kZXggPT09IGxhc3RPcHRpb25JbmRleCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0T3B0aW9uVmFsdWUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWU7XG5cbiAgICAgICAgICBvcHRpb25NYXBbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh1bmFiYnJldmlhdGVkT3B0aW9uKSB7XG5cdFx0ICBsZXQgb3B0aW9uTmFtZSwgb3B0aW9uVmFsdWU7XG5cblx0XHQgIGNvbnN0IGluZGV4ID0gYXJndW1lbnQuaW5kZXhPZignPScpO1xuXG5cdFx0ICBpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0ICAgIG9wdGlvbk5hbWUgPSBhcmd1bWVudC5zdWJzdHJpbmcoMik7XG5cbiAgICAgICAgb3B0aW9uVmFsdWUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcblx0XHQgICAgb3B0aW9uTmFtZSA9IGFyZ3VtZW50LnN1YnN0cmluZygyLCBpbmRleCk7XG5cblx0XHQgICAgb3B0aW9uVmFsdWUgPSAgYXJndW1lbnQuc3Vic3RyaW5nKGluZGV4ICsgMSk7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbk1hcFtvcHRpb25OYW1lXSA9IG9wdGlvblZhbHVlO1xuICAgIH0gZWxzZSB7XG5cdFx0ICBjb25zdCBjb21tYW5kID0gdG9DYW1lbENhc2UoYXJndW1lbnQpO1xuXG4gICAgICBjb21tYW5kcy5wdXNoKGNvbW1hbmQpO1xuICAgIH1cblx0fSk7XG5cblx0Y29uc3QgYWJicmV2aWF0ZWRPcHRpb25OYW1lcyA9IE9iamVjdC5rZXlzKG9wdGlvbkFiYnJldmlhdGlvbk1hcCk7ICAvLy9cblxuICBhYmJyZXZpYXRlZE9wdGlvbk5hbWVzLmZvckVhY2goKGFiYnJldmlhdGVkT3B0aW9uTmFtZSkgPT4ge1xuICAgIGlmIChvcHRpb25NYXAuaGFzT3duUHJvcGVydHkoYWJicmV2aWF0ZWRPcHRpb25OYW1lKSkge1xuICAgICAgY29uc3QgdW5BYmJyZXZpYXRlZE9wdGlvbk5hbWUgPSBvcHRpb25BYmJyZXZpYXRpb25NYXBbYWJicmV2aWF0ZWRPcHRpb25OYW1lXTtcblxuICAgICAgaWYgKG9wdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eSh1bkFiYnJldmlhdGVkT3B0aW9uTmFtZSkpIHtcbiAgICAgICAgLy8vXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25NYXBbdW5BYmJyZXZpYXRlZE9wdGlvbk5hbWVdID0gb3B0aW9uTWFwW2FiYnJldmlhdGVkT3B0aW9uTmFtZV07XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBvcHRpb25NYXBbYWJicmV2aWF0ZWRPcHRpb25OYW1lXTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG9wdGlvbk5hbWVzID0gT2JqZWN0LmtleXMob3B0aW9uTWFwKSxcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbk5hbWVzLnJlZHVjZSgob3B0aW9ucywgb3B0aW9uTmFtZSkgPT4ge1xuXHQgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uTWFwW29wdGlvbk5hbWVdO1xuXG4gICAgICAgICAgb3B0aW9uTmFtZSA9IHRvQ2FtZWxDYXNlKG9wdGlvbk5hbWUpOyAvLy9cblxuICAgICAgICAgIG9wdGlvbnNbb3B0aW9uTmFtZV0gPSBvcHRpb25WYWx1ZTtcblxuICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICB9LCB7fSk7XG5cblx0cmV0dXJuICh7XG5cdFx0YXJncyxcbiAgICBvcHRpb25zLFxuXHRcdGNvbW1hbmRzLFxuXHRcdGZpbGVQYXRoLFxuXHRcdGludGVycHJldGVyUGF0aFxuXHR9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlQXJndlxufTtcblxuZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLSguKS9nLCAobWF0Y2gsIGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCkpO1xufVxuIl19